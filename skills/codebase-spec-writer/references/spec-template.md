# Spec Template — Annotated Reference

This is the full spec template with inline guidance for each section.
Claude should use this as the authoritative template when writing specs.

---

# [Feature Name] — Product Specification

> **Guidance**: Use the folder name as the feature name, but humanize it.
> `auth/` → "Authentication", `billing/` → "Billing & Payments", `dashboard/` → "Dashboard"

**Module path:** `path/to/module/`

> **Guidance**: Use the relative path from repo root.

**Last analyzed:** [today's date]

**Status:** [Active / In Progress / Deprecated]

> **Guidance**: Infer status from signals:
> - Active: recent commits, no deprecation comments
> - In Progress: lots of TODOs, incomplete implementations
> - Deprecated: explicit deprecation comments, imports being replaced elsewhere

---

## Overview

> **Guidance**: 2-4 sentences. Answer: What does this do? Who uses it? Why does it exist?
> Write for a non-technical product manager. Avoid jargon.
> Bad: "This module exports middleware functions that intercept HTTP requests..."
> Good: "Authentication handles how users log in, log out, and manage their sessions.
> It supports email/password login and OAuth providers like Google and GitHub."

---

## User Stories

> **Guidance**: Infer from route handlers, controller actions, UI components, or service methods.
> Each story = one meaningful user-facing action.
> Format: "As a [role], I can [do something] so that [outcome]."
> Roles to consider: anonymous user, logged-in user, admin, system/cron job, API consumer.

- As a [role], I can ...

---

## Core Functionality

> **Guidance**: List 3-8 capabilities. Reference real code artifacts (file names, function names, class names).
> Keep descriptions to one sentence each.

| Capability | Description | Key File(s) |
|---|---|---|
| [e.g. Email login] | Validates credentials and issues a session token | `auth/handlers/login.ts` |

---

## Technical Implementation

### Entry Points

> **Guidance**: List the "surface area" of this module — how other code (or users) interact with it.
> Examples: exported functions, Express routes, CLI commands, event listeners, cron jobs.
> Include the actual function/route signatures where possible.

```
POST /auth/login       → handlers/login.ts#loginHandler
POST /auth/logout      → handlers/logout.ts#logoutHandler
export { verifyToken } → lib/jwt.ts
```

### Data Models

> **Guidance**: List database tables, ORM models, Zod/Pydantic schemas, or TypeScript interfaces
> that this module *owns* (creates/writes). Distinguish owned vs. read-only dependencies.

| Model | Location | Notes |
|---|---|---|
| User | `models/user.ts` | Owned by auth |
| Session | `models/session.ts` | Owned by auth |

### Key Dependencies

**Internal:** [other modules from this repo it imports from]

> Example: `shared/email` for sending verification emails, `users/` for profile data

**External:** [notable packages]

> Example: `bcrypt` for password hashing, `jsonwebtoken` for JWT signing, `passport` for OAuth

### Configuration

> **Guidance**: List env vars or config keys. Scan for `process.env.*`, `config.get(*)`, `os.environ[*]`.

| Variable | Description | Required |
|---|---|---|
| `JWT_SECRET` | Secret key for signing tokens | Yes |
| `GOOGLE_CLIENT_ID` | OAuth app ID for Google login | No |

---

## API / Interface

> **Guidance**: Document the public contract of this module.
> For REST APIs: method, path, request body, response shape.
> For exported functions: signature, params, return value.
> For event-driven: event names and payloads.
> If purely internal with no stable public interface: say so.

### REST Endpoints

#### `POST /auth/login`
Request:
```json
{ "email": "string", "password": "string" }
```
Response (200):
```json
{ "token": "string", "user": { "id": "string", "email": "string" } }
```

---

## Known Limitations & Edge Cases

> **Guidance**: Look for:
> - `TODO`, `FIXME`, `HACK`, `XXX` comments in code
> - Catch blocks with `console.error` and no real handling
> - Hardcoded values that look like they should be configurable
> - Feature flags that gate incomplete work
> If nothing found: "None identified during automated analysis."

---

## Open Questions

> **Guidance**: Flag things that are ambiguous from code alone:
> - Business logic that could go multiple ways
> - Missing documentation on why something works a certain way
> - Behavior that seems inconsistent or surprising
> These are for the human to fill in.

- [ ] [Question 1]
- [ ] [Question 2]

---

*This spec was auto-generated by the codebase-spec-writer skill. Review and update as needed.*
